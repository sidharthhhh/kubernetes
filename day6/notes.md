# Project Overview: Secure Ingress with TLS

## 1. What is this project?
This project demonstrates how to **securely expose a Kubernetes application** to the outside world using an **Ingress Controller** and **HTTPS (TLS)**.

Instead of accessing internal pods directly or using basic NodePorts, we use a production-ready approach where a single entry point (the Ingress) manages traffic and security.

## 2. Why do we need this?
*   **Security (TLS/SSL):** We want traffic to be encrypted between the user and the cluster. We shouldn't serve applications over plain HTTP.
*   **Routing Logic:** We want to route traffic based on domain names (e.g., `api.local`). This allows hosting multiple different apps on the same cluster/IP address.
*   **Certificate Management:** Decoupling SSL termination from the application logic. The app (`whoami`) doesn't know about certificates; the cluster infrastructure handles it.

## 3. How does it work?
Based on the architecture `architecture.md`, the flow implies a separation of concerns:

### The "How" Steps:
1.  **DNS Resolution (The Trick):**
    *   Since `api.local` isn't a real website, we trick our computer (via the `hosts` file) to think `api.local` is `127.0.0.1` (our local cluster).
2.  **The Secure Handshake (Ingress):**
    *   When you visit `https://api.local`, your browser talks to the **Traefik Ingress Controller**.
    *   Traefik checks the **Kubernetes Secret** (`whoami-tls`) which contains our custom-generated certificate.
    *   It uses this to establish a secure, encrypted connection with your browser.
3.  **Routing (The Backend):**
    *   Once decrypted, Traefik looks at the request: *"Oh, this is for `api.local`."*
    *   It checks its rules and sees that `api.local` maps to the `whoami-service`.
    *   It forwards the *unencrypted* traffic inside the cluster to the `whoami` Pod.
4.  **Response:**
    *   The Pod replies, and the Ingress sends the response back through the secure tunnel to you.

## Component Summary
| Component | Purpose |
| :--- | :--- |
| **tls.key / tls.crt** | The raw cryptographic keys generated by OpenSSL. |
| **Secret (`whoami-tls`)** | How Kubernetes safely stores those keys. |
| **Ingress (`ingress.yaml`)** | The "Traffic Cop" rules: "If host is `api.local`, use this Secret and go to this Service." |
| **Service (`whoami-service`)** | A stable internal address for the application pods. |
